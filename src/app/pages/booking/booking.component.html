<nav class="top-links">
  <a class="nav-link nav-left" routerLink="/info">
    <span class="arrow">→</span>
    <span class="text">استعلام</span>
  </a>
  <a class="nav-link nav-right" routerLink="/home">
    <span class="text">الرئيسية</span>
    <span class="arrow">←</span>
  </a>
</nav>

<header class="py-5">
  <!-- Offers -->
  <div class="offer-section text-center py-3 mt-5">
    <h3 class="fw-bold fs-4 mb-3 edit-textitle ">مواعيد عمل العيادة</h3>
    <p class="fs-6">السبت، الأحد، الثلاثاء، الأربعاء — 11:30ص | 10:00م </p>
  </div>


  <div class="alert-bar pt-5">
    <div class="alert-content">
      <div class="alert-title">تنبيه هام</div>
      <div class="alert-text">
        <div class="scroll-text">
          تعتذر د. أميرة محسن عن التواجد في العيادة يوم
          <span class="date">٢٢ / ١٠</span>
          لحضورها مؤتمر طبي عن الحقن المجهري و المناظير
        </div>
      </div>
    </div>
  </div>




  <section class="page">

    <div class="card">
      <h1 class="title">الحجز</h1>



      <form class="form" (ngSubmit)="onSubmit()" #bookingForm="ngForm" novalidate>
        <!-- الاسم -->
        <div class="row">
          <div class="icon" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.4"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <input type="text" class="date-input" placeholder="الاسم كامل" [(ngModel)]="bookingData.name" name="name"
            required minlength="3" #name="ngModel" />
        </div>
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="error">
          <small *ngIf="name.errors?.['required']">⚠️ الاسم مطلوب</small>
          <small *ngIf="name.errors?.['minlength']">⚠️ الاسم لا يقل عن 3 حروف</small>
        </div>

        <!-- الهاتف -->
        <div class="row">
          <div class="icon" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.4"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path
                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1 3.08 4.18 2 2 0 0 1 5 2h3">
              </path>
              <path d="M16 3l5 5"></path>
            </svg>
          </div>
          <input type="tel" placeholder="رقم الهاتف (مثال: 01124859707 أو +201124859707)" class="rtl-input date-input"
            [(ngModel)]="bookingData.phone" name="phone" required #phone="ngModel" />
        </div>
        <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="error">
          <small *ngIf="phone.errors?.['required']">⚠️ رقم الهاتف مطلوب</small>
        </div>

        <!-- التاريخ -->
        <div class="row panel date-row">
          <div class="icon" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2"
              stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2"></rect>
              <path d="M16 2v4M8 2v4M3 10h18"></path>
            </svg>
          </div>
          <input #dateInput type="text" class="date-input" placeholder="اختر تاريخ الحجز"
            [(ngModel)]="bookingData.bookingDate" name="bookingDate" required #bookingDate="ngModel" />
        </div>
        <div *ngIf="bookingDate.invalid && (bookingDate.dirty || bookingDate.touched)" class="error">
          <small *ngIf="bookingDate.errors?.['required']">⚠️ التاريخ مطلوب</small>
        </div>


        <!-- نوع الزيارة -->
        <div class="row">
          <div class="icon" aria-hidden="true">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.4"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 6H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z"></path>
              <path d="M16 2v4M8 2v4M3 10h18"></path>
            </svg>
          </div>
          <select class="date-input" [(ngModel)]="bookingData.appointmentType" name="appointmentType" required
            #appointmentType="ngModel">
            <option value="" disabled selected hidden>اختر نوع الزيارة</option>
            <option [value]="0" class="text-black">كشف</option>
            <option [value]="1" class="text-black">تعاقد</option>
          </select>
        </div>
        <div *ngIf="appointmentType.invalid && (appointmentType.dirty || appointmentType.touched)" class="error">
          <small>⚠️ نوع الزيارة مطلوب</small>
        </div>


        <!-- زر الحجز -->
        <button type="submit" class="btn" [disabled]="bookingForm.invalid || isLoading">
          {{ isLoading ? 'جاري الحجز...' : 'احجز الآن' }}
        </button>
      </form>

      <!-- رسائل -->
      <div *ngIf="errorMessage" class="error mt-3">
        ⚠️ {{ errorMessage }}
      </div>

      <!-- نتيجة الحجز -->
      <!-- <div *ngIf="responseData" class="success mt-3">
        <h3>تم الحجز بنجاح ✅</h3>
        <p>الاسم: {{ responseData.patientName }}</p>
        <p>نوع الزيارة: {{ responseData.appointmentType }}</p>
        <p>التاريخ: {{ responseData.displayDate || responseData.date }}</p>
        <p>الرقم في الدور: {{ responseData.queueNumber }}</p>
        <p>الوقت المتوقع: {{ responseData.displayEstimatedTime || responseData.estimatedTime }}</p>
        <p>الحالة: {{ responseData.status }}</p>
        <p>الهاتف المعتمد: {{ responseData.phone }}</p>
      </div> -->
    </div>
  </section>
</header>